CMU NOTES w/ Sebastien and Graham
Date: 20120925-26

CMU PBS Professional Connector

Presentation Point
 - Allow administrator to achieve 80% of the tasks through the CMU interface.

NOTE:
 - High-Level Introduction Presentation
   - Attendees
     - Sylvie Tchijakoff <Sylvie.Tchijakoff@hp.com>
       - Works on RFPs and configuration of clusters; Intrested in WLM capabalities.
     - Eric Sip <Eric.Sip@hp.com>
       - Works on RFPs and configuration of clusters; Intrested in WLM capabalities.
     - Patrick Van Reeth <Patrick.Vanreeth@hp.com>, HPC Technology Consultant, EMEA ISS Presales
       - Applicaiton Benchmark; Interested in Altair solvers supporting GPU.
     - Sebastien Cabaniols <sebastien.cabaniols@hp.com>, Consultant HPC and Linux
       - CMU developer; Interested in the PBS Pro & CMU integrartion AND primary reason for visit.
   - Very well rec'd by HP team
   - They learned that Altair was more than just PBS or Radioss!
   - Good discussions and questions about PBS Pro capabilities
   - Potential opportunities? (Follow up with Paolo)

 - LSF is very likely to be dropped by HP.. will no longer promoted or make available. This is the word on the street.
   - Potential opportunity for Altair to provide an agressive deal (probably more than free non-production licenses) to replace LSF w/ PBS Professional in the competency and benchmark centers
   - SGE is not a viable solution
   - Obviously, Moab a strong contender!!

 - WRT CMU Connectors, Moab and PBS Pro are going to be showcased, but might include SLURM.
   - Moab original did work but never finished... So Sebastien concludes Altair will have the first CMU Connector!! [We should not claim to be the first as it will be viewed unprofessional]
   - Altair responsible for package and distribution, and for support.
     - If required Altair to contact HP CMU team for questions (need to have finer details worked out.. contract?)

 - CMU to support ARM (moonshot project) 4Q2012
   - Not likely applicable to HPC, yet. Need 64bit support. Something for us to pay attention

 - WRT HP-CAST/SC12, Sebastien WANTS this to be demo'd in their booth!!!
   - Any screenshots taken will be considered placeholders or a disclaimer that this is the old interface. Ideally we will need to update screenshots before HP-CAST/SC12
   - Cluster will be available from NOW until Oct 22 (9AM)
   - Recommend working w/ Jean-Luc Assor for preparation of the SC12. Sebastien WANTS this to be demo'd in their booth!!!

 - Introduced to the Airbus HP Team!
   - Admins (2of3)
     - Arnaud Tiger <arnaud.tiger@hp.com>
     - Eric Mena <Eric.Mena@hp.com>
   - Assured them that if/when the time comes to switch to PBS ;o) We will offer support and training to ease them through the transition.
   - NOTE: HP manages their 5 of the 12 clusters (need to double check the cluster count), and since HP is likely to drop LSF ... this might introduce an oportunity.

Send email to Andy, Chris, and Sebastien.
If emails get too much, call them, and then send out the email summary.

Integration Points
1. Dynamic User Group
   - DONE - Dynamically creates user groups based on job running on nodes.
     - Benefit: Allows for Admin/User to see the utilization/performance metrics of the job on the node(s)
   - NOTE:
     - HP to officially distribute w/in CMU
     - Requesting the WLM to maintain the respective sections of code.
     - Future consideration to provide dynamic user group in the respective connector

2. Custom Menus
   - DONE - Register / Unregister Nodes
   - DONE - Online / Offline Nodes
     - Keep Online/Offline simple, just change pbsnodes -o and pbsnodes -c -- Do not move to maintenance queue.
   - DONE - Enable / Disable PBS OS Provisioning

   - DONE - Delete Job(s) on Node(s)
     - identify which jobs are associated to the selected node(s), construct the job list
     - qmsg the job(s) with the action happening from CMU Administrator
     - qdel job list
     job_list=`pbsnodes sles11-00 sles11-01 | grep jobs |  sed -e 's/     jobs = //g' | sed -e 's/, /\n/g' | awk 'BEGIN {FS="/"}; {print $1}' | sort -u`
     for j in $job_list ; do
       echo $j
       qmsg "(`date '+%m/%d/%Y %H:%M'`) CMU Administrator has terminiated the job" $j
       qdel $j
     done
     - Conditions
       - If there are no jobs on the node(s), output "No jobs to delete on nodes.

   - DONE - Show Job(s) on Cluster
     - If qstat -an returns null, echo "No jobs in queue(s)"
     - Else return the output of qstat -an
     qstat_out=`qstat`
     if [ -z "$qstat_out" ]; then
       echo "No jobs in queue(s)"
     else
       qstat -an1
     fi
   - DONE - Show Reservartion(s) on Cluster
     - If pbs_rstat  returns null, echo "No jobs in queue(s)"
     - Else return the output of pbs_rstat
     pbs_rstat_out=`pbs_rstat`
     if [ -z "$pbs_rstat_out" ]; then
       echo "No PBS Reservations"
     else
       pbs_rstat
     fi

   - DONE - Show Running Job(s) on Node(s)
     - identify jobs are associated to the selected node(s), construct the job list
     - qstat job list
     pbsnodes sles11-00 sles11-01 | grep -e "^[[:alnum:]]" -e jobs
   - DONE - Show Suspend Job(s) on Node(s)
   - DONE - Show Checkpoint Job(s) on Node(s)

   - DONE - Suspend Job(s) on Node(s)
     - WARNING: Only useful applications can support suspend/resume AND PBS MOM is configured to trigger the suspend/resume correctly
     - identify which jobs are associated to the selected node(s), construct the job list
     - qmsg the job(s) with the action happening from CMU Administrator
     - qsig -s suspend job list
     job_list=`pbsnodes sles11-00 sles11-01 | grep jobs |  sed -e 's/     jobs = //g' | sed -e 's/, /\n/g' | awk 'BEGIN {FS="/"}; {print $1}' | sort -u`
     for j in $job_list ; do
       echo $j
       qmsg "(`date '+%m/%d/%Y %H:%M'`) CMU Administrator has suspended the job" $j
       qsig -s suspend $j
     done
   - DONE - Resume Job(s) on Node(s)
     - WARNING: Only useful applications can support suspend/resume AND PBS MOM is configured to trigger the suspend/resume correctly
     - identify which jobs are associated to the selected node(s), construct the job list
     - qmsg the job(s) with the action happening from CMU Administrator
     - qsig -s resume job list
     job_list=`pbsnodes sles11-00 sles11-01 | grep jobs |  sed -e 's/     jobs = //g' | sed -e 's/, /\n/g' | awk 'BEGIN {FS="/"}; {print $1}' | sort -u`
     for j in $job_list ; do
       echo $j
       qmsg "(`date '+%m/%d/%Y %H:%M'`) CMU Administrator has resumed the job" $j
       qsig -s resume $j
     done

   - DONE - Hold Job(s) on Node(s)
     - WARNING: Only useful applications can support checkpoint/restart AND PBS MOM is configured to trigger the checpoint/restart correctly
     - identify which jobs are associated to the selected node(s), construct the job list
     - qmsg the job(s) with the action happening from CMU Administrator
     - qsig -s suspend job list
     job_list=`pbsnodes sles11-00 sles11-01 | grep jobs |  sed -e 's/     jobs = //g' | sed -e 's/, /\n/g' | awk 'BEGIN {FS="/"}; {print $1}' | sort -u`
     for j in $job_list ; do
       echo $j
       qmsg "(`date '+%m/%d/%Y %H:%M'`) CMU Administrator has checkpointed the job" $j
       qhold $j
     done
   - DONE - Release Job(s) on Node(s)
     - WARNING: Only useful applications can support suspend/resume AND PBS MOM is configured to trigger the suspend/resume correctly
     - identify which jobs are associated to the selected node(s), construct the job list
     - qmsg the job(s) with the action happening from CMU Administrator
     - qsig -s resume job list
     job_list=`pbsnodes sles11-00 sles11-01 | grep jobs |  sed -e 's/     jobs = //g' | sed -e 's/, /\n/g' | awk 'BEGIN {FS="/"}; {print $1}' | sort -u`
     for j in $job_list ; do
       echo $j
       qmsg "(`date '+%m/%d/%Y %H:%M'`) CMU Administrator has released the job" $j
       qrls $j
     done

   - DONE - Move to Maintenance Mode / Move to Production Mode
     - Take the existing online/offline and rework for maintenance stage and such.
   - DONE - Update ALL Logical Groups (See Item 4)
     - Only applies to the nodes registered with PBS Professional.. brute force removing of current_aoe and
       available.aoes, then redefining all of them.. would be better to do deltas, but will consider in the future.
   - DONE - Update ALL Network Entities (See Item 4)
   - DONE - Start / Stop / Restart PBS Professional Server/Scheduler
     - Only applicable on the CMU headnode
   - DONE - Start / Stop / Restart PBS Professional MOM [Consider commenting out]

   - DONE - PBS Online Resources:
     - Online Documentation
     - User Forum
     - Contact Support
     - NOTE: CMU to provide keyword for BROWSER

3. Action, Alerts, and Alert_Reaction
   - DONE - Action: PBS Professional MOM Daemon Status (Up/Down)
   - DONE - Action: Node State (free, busy, offline, etc)
   - DONE - Action: # of job
     - Number of job(s) on the node
     - Consider EXTENDED MONITORING. This will remove the need for the pbsnodes command to be executed on each node. Instead, the data known to the PBS Server will be pushed into CMU in the expected CMU format.
       - Be sure to 'lump' the common nodes together as it will be more efficient.
   - [FUTURE CONSIDERATION] Action: Unused Resource: RES
     - Unused resource (Available - Used) on the node
     - Consider EXTENDED MONITORING. This will remove the need for the pbsnodes command to be executed on each node. Instead, the data known to the PBS Server will be pushed into CMU in the expected CMU format.
   - DONE - Alert: Detect Node Down
     - Consider EXTENDED MONITORING. This will remove the need for the pbsnodes command to be executed on each node. Instead, the data known to the PBS Server will be pushed into CMU in the expected CMU format.
   - DONE - Alert: Detect Node Offline
     - Consider EXTENDED MONITORING. This will remove the need for the pbsnodes command to be executed on each node. Instead, the data known to the PBS Server will be pushed into CMU in the expected CMU format.
   - DONE - Alert_Reaction: Email root of Node Down
   - DONE - Alert_Reaction: Email root of Node Offline

4. Network Topologies
   - CMU Network Entities [Describes the GigE switches]
     - Benefit: Automatically high speed network topology detection via CMU
     - Do not use EXTENDED MONITORING; Consider tool button for the admin to manually updated the Network Entities
       - Consider using the delta game, or delete placement sets
       - Prefix the placement set with cmu_ so we know that it was created based on CMU interface.
   - CMU User Groups (IB_switch) [Describes custom high speed fabrics, e.g., Mellanox]
     - Benefit: Automatically high speed network topology detection via CMU
     - Do not use EXTENDED MONITORING; Consider tool button for the admin to manually updated the Logical Group
       - Consider using the delta game, or delete placement sets
       - Prefix the placement set with cmu_ so we know that it was created based on CMU interface.

5. OS Provisioning
   - DONE - CMU Logical Groups == PBS Professional Application Operating Environment (aoe)
     - Detect current aoe (push through a for loop cmu_show_nodes -o "%n %l")
     - Detect eligible logical groups for the nodes (nested for loop)
   - qsub hook to validate the requested aoe; if aoe = lg; accept job; else reject "aoe does not exist on cluster"
     - Consideration to have ACLs on AOEs.
   - DONE - Report current image installed

6. Node Health/Fault Detection
   - Similar to Intel Cluster Checker, but without performance analysis.
   - Detect SMART Disk Warning/Errors; Consider offlining node, move to fault_node queue, email root
   - Available Disk Space; Consider offlining node, move to fault_node queue, email root
   - Detect $Service_Name is Running;

7. Performance Validation
   - Check to make sure identified nodes are performing at acceptable metrics.
   - Requires metrics to determine if performance is acceptable.

Consolidate the cmu_pbs_node
 --register CMU_TEMP_NODE_FILE
 --unregister CMU_TEMP_NODE_FILE
 --online CMU_TEMP_NODE_FILE
 --offline CMU_TEMP_NODE_FILE
 --prov-enable CMU_TEMP_NODE_FILE
 --prov-disable CMU_TEMP_NODE_FILE
 --update-lg CMU_TEMP_NODE_FILE
 --update-ne CMU_TEMP_NODE_FILE
 Consider no argument results in a table formatted output of register nodes, online vs offline, prov_enable vs prov_diable, active lg

 Consolidate the cmu_pbs_job
 --suspend CMU_TEMP_NODE_FILE
 --resume CMU_TEMP_NODE_FILE
 --hold CMU_TEMP_NODE_FILE
 --release CMU_TEMP_NODE_FILE
 --terminate CMU_TEMP_NODE_FILE

8. Power and Thermal Metrics (Assume Gen8 and iLO4) [Future work for January. However market the future capability by SC12]
 - AMS, patch, on CMU Management Node (not available for moonshot)
 - Sebastien to get Marco to create Gen8 cluster w/ latest CMU
 - Chris Holmes will have the details on all of the metrics exposed via iLO4 metric
 - cmu_monstat or flat_file: /opt/cmu/tmp/GUI/$sequence (only good for 15mins)

9. Custom User Group defining node attributes for performance
 - attr_$

Power Comparison metric is compare to linpack.
 - With linpack it is a power hog, and if we can compare how much was used compare


Cool type for compressing/expanding node

root@o184i224 ~]# echo "bla1 bla2 bla3" | /opt/cmu/tools/cmu_condense_names
bla[1-3]
[root@o184i224 ~]# echo "bla-rack1[1,2,4-567]-blade" | /opt/cmu/tools/cmu_expand_names
bla-rack11-blade,bla-rack12-blade,bla-rack14-blade,bla-rack15-blade,bla-rack16-blade,bla-rack17-blade,bla-rack18-blade,bla-rack19-blade,bla-rack110-blade,bla-rack111-blade,bla-rack112-blade,bla-rack113-blade,bla-rack114-blade,bla-rack115-blade,bla-rack116-blade,bla-rack117-blade,bla-rack118-blade,bla-rack119-blade,bla-rack120-blade,bla-rack121-blade,bla-rack122-blade,bla-rack123-blade,bla-rack124-blade,bla-rack125-blade,bla-rack126-blade,bla-rack127-blade,bla-rack128-blade,bla-rack129-blade,bla-rack130-blade,bla-rack131-blade,bla-rack132-blade,bla-rack133-blade,bla-rack134-blade,bla-rack135-blade,bla-rack136-blade,bla-rack137-blade,bla-rack138-blade,bla-rack139-blade,bla-rack140-blade,bla-rack141-blade,bla-rack142-blade,bla-rack143-blade,bla-rack144-blade,bla-rack145-blade,bla-rack146-blade,bla-rack147-blade,bla-rack148-blade,bla-rack149-blade,bla-rack150-blade,bla-rack151-blade,bla-rack152-blade,bla-rack153-blade,bla-rack154-blade,bla-rack155-blade,bla-rack156-blade,bla-rack157-blade,bla-rack158-blade,bla-rack159-blade,bla-rack160-blade,bla-rack161-blade,bla-rack162-blade,bla-rack163-blade,bla-rack164-blade,bla-rack165-blade,bla-rack166-blade,bla-rack167-blade,bla-rack168-blade,bla-rack169-blade,bla-rack170-blade,bla-rack171-blade,bla-rack172-blade,bla-rack173-blade,bla-rack174-blade,bla-rack175-blade,bla-rack176-blade,bla-rack177-blade,bla-rack178-blade,bla-rack179-blade,bla-rack180-blade,bla-rack181-blade,bla-rack182-blade,bla-rack183-blade,bla-rack184-blade,bla-rack185-blade,bla-rack186-blade,bla-rack187-blade,bla-rack188-blade,bla-rack189-blade,bla-rack190-blade,bla-rack191-blade,bla-rack192-blade,bla-rack193-blade,bla-rack194-blade,bla-rack195-blade,bla-rack196-blade,bla-rack197-blade,bla-rack198-blade,bla-rack199-blade,bla-rack1100-blade,bla-rack1101-blade,bla-rack1102-blade,bla-rack1103-blade,bla-rack1104-blade,bla-rack1105-blade,bla-rack1106-blade,bla-rack1107-blade,bla-rack1108-blade,bla-rack1109-blade,bla-rack1110-blade,bla-rack1111-blade,bla-rack1112-blade,bla-rack1113-blade,bla-rack1114-blade,bla-rack1115-blade,bla-rack1116-blade,bla-rack1117-blade,bla-rack1118-blade,bla-rack1119-blade,bla-rack1120-blade,bla-rack1121-blade,bla-rack1122-blade,bla-rack1123-blade,bla-rack1124-blade,bla-rack1125-blade,bla-rack1126-blade,bla-rack1127-blade,bla-rack1128-blade,bla-rack1129-blade,bla-rack1130-blade,bla-rack1131-blade,bla-rack1132-blade,bla-rack1133-blade,bla-rack1134-blade,bla-rack1135-blade,bla-rack1136-blade,bla-rack1137-blade,bla-rack1138-blade,bla-rack1139-blade,bla-rack1140-blade,bla-rack1141-blade,bla-rack1142-blade,bla-rack1143-blade,bla-rack1144-blade,bla-rack1145-blade,bla-rack1146-blade,bla-rack1147-blade,bla-rack1148-blade,bla-rack1149-blade,bla-rack1150-blade,bla-rack1151-blade,bla-rack1152-blade,bla-rack1153-blade,bla-rack1154-blade,bla-rack1155-blade,bla-rack1156-blade,bla-rack1157-blade,bla-rack1158-blade,bla-rack1159-blade,bla-rack1160-blade,bla-rack1161-blade,bla-rack1162-blade,bla-rack1163-blade,bla-rack1164-blade,bla-rack1165-blade,bla-rack1166-blade,bla-rack1167-blade,bla-rack1168-blade,bla-rack1169-blade,bla-rack1170-blade,bla-rack1171-blade,bla-rack1172-blade,bla-rack1173-blade,bla-rack1174-blade,bla-rack1175-blade,bla-rack1176-blade,bla-rack1177-blade,bla-rack1178-blade,bla-rack1179-blade,bla-rack1180-blade,bla-rack1181-blade,bla-rack1182-blade,bla-rack1183-blade,bla-rack1184-blade,bla-rack1185-blade,bla-rack1186-blade,bla-rack1187-blade,bla-rack1188-blade,bla-rack1189-blade,bla-rack1190-blade,bla-rack1191-blade,bla-rack1192-blade,bla-rack1193-blade,bla-rack1194-blade,bla-rack1195-blade,bla-rack1196-blade,bla-rack1197-blade,bla-rack1198-blade,bla-rack1199-blade,bla-rack1200-blade,bla-rack1201-blade,bla-rack1202-blade,bla-rack1203-blade,bla-rack1204-blade,bla-rack1205-blade,bla-rack1206-blade,bla-rack1207-blade,bla-rack1208-blade,bla-rack1209-blade,bla-rack1210-blade,bla-rack1211-blade,bla-rack1212-blade,bla-rack1213-blade,bla-rack1214-blade,bla-rack1215-blade,bla-rack1216-blade,bla-rack1217-blade,bla-rack1218-blade,bla-rack1219-blade,bla-rack1220-blade,bla-rack1221-blade,bla-rack1222-blade,bla-rack1223-blade,bla-rack1224-blade,bla-rack1225-blade,bla-rack1226-blade,bla-rack1227-blade,bla-rack1228-blade,bla-rack1229-blade,bla-rack1230-blade,bla-rack1231-blade,bla-rack1232-blade,bla-rack1233-blade,bla-rack1234-blade,bla-rack1235-blade,bla-rack1236-blade,bla-rack1237-blade,bla-rack1238-blade,bla-rack1239-blade,bla-rack1240-blade,bla-rack1241-blade,bla-rack1242-blade,bla-rack1243-blade,bla-rack1244-blade,bla-rack1245-blade,bla-rack1246-blade,bla-rack1247-blade,bla-rack1248-blade,bla-rack1249-blade,bla-rack1250-blade,bla-rack1251-blade,bla-rack1252-blade,bla-rack1253-blade,bla-rack1254-blade,bla-rack1255-blade,bla-rack1256-blade,bla-rack1257-blade,bla-rack1258-blade,bla-rack1259-blade,bla-rack1260-blade,bla-rack1261-blade,bla-rack1262-blade,bla-rack1263-blade,bla-rack1264-blade,bla-rack1265-blade,bla-rack1266-blade,bla-rack1267-blade,bla-rack1268-blade,bla-rack1269-blade,bla-rack1270-blade,bla-rack1271-blade,bla-rack1272-blade,bla-rack1273-blade,bla-rack1274-blade,bla-rack1275-blade,bla-rack1276-blade,bla-rack1277-blade,bla-rack1278-blade,bla-rack1279-blade,bla-rack1280-blade,bla-rack1281-blade,bla-rack1282-blade,bla-rack1283-blade,bla-rack1284-blade,bla-rack1285-blade,bla-rack1286-blade,bla-rack1287-blade,bla-rack1288-blade,bla-rack1289-blade,bla-rack1290-blade,bla-rack1291-blade,bla-rack1292-blade,bla-rack1293-blade,bla-rack1294-blade,bla-rack1295-blade,bla-rack1296-blade,bla-rack1297-blade,bla-rack1298-blade,bla-rack1299-blade,bla-rack1300-blade,bla-rack1301-blade,bla-rack1302-blade,bla-rack1303-blade,bla-rack1304-blade,bla-rack1305-blade,bla-rack1306-blade,bla-rack1307-blade,bla-rack1308-blade,bla-rack1309-blade,bla-rack1310-blade,bla-rack1311-blade,bla-rack1312-blade,bla-rack1313-blade,bla-rack1314-blade,bla-rack1315-blade,bla-rack1316-blade,bla-rack1317-blade,bla-rack1318-blade,bla-rack1319-blade,bla-rack1320-blade,bla-rack1321-blade,bla-rack1322-blade,bla-rack1323-blade,bla-rack1324-blade,bla-rack1325-blade,bla-rack1326-blade,bla-rack1327-blade,bla-rack1328-blade,bla-rack1329-blade,bla-rack1330-blade,bla-rack1331-blade,bla-rack1332-blade,bla-rack1333-blade,bla-rack1334-blade,bla-rack1335-blade,bla-rack1336-blade,bla-rack1337-blade,bla-rack1338-blade,bla-rack1339-blade,bla-rack1340-blade,bla-rack1341-blade,bla-rack1342-blade,bla-rack1343-blade,bla-rack1344-blade,bla-rack1345-blade,bla-rack1346-blade,bla-rack1347-blade,bla-rack1348-blade,bla-rack1349-blade,bla-rack1350-blade,bla-rack1351-blade,bla-rack1352-blade,bla-rack1353-blade,bla-rack1354-blade,bla-rack1355-blade,bla-rack1356-blade,bla-rack1357-blade,bla-rack1358-blade,bla-rack1359-blade,bla-rack1360-blade,bla-rack1361-blade,bla-rack1362-blade,bla-rack1363-blade,bla-rack1364-blade,bla-rack1365-blade,bla-rack1366-blade,bla-rack1367-blade,bla-rack1368-blade,bla-rack1369-blade,bla-rack1370-blade,bla-rack1371-blade,bla-rack1372-blade,bla-rack1373-blade,bla-rack1374-blade,bla-rack1375-blade,bla-rack1376-blade,bla-rack1377-blade,bla-rack1378-blade,bla-rack1379-blade,bla-rack1380-blade,bla-rack1381-blade,bla-rack1382-blade,bla-rack1383-blade,bla-rack1384-blade,bla-rack1385-blade,bla-rack1386-blade,bla-rack1387-blade,bla-rack1388-blade,bla-rack1389-blade,bla-rack1390-blade,bla-rack1391-blade,bla-rack1392-blade,bla-rack1393-blade,bla-rack1394-blade,bla-rack1395-blade,bla-rack1396-blade,bla-rack1397-blade,bla-rack1398-blade,bla-rack1399-blade,bla-rack1400-blade,bla-rack1401-blade,bla-rack1402-blade,bla-rack1403-blade,bla-rack1404-blade,bla-rack1405-blade,bla-rack1406-blade,bla-rack1407-blade,bla-rack1408-blade,bla-rack1409-blade,bla-rack1410-blade,bla-rack1411-blade,bla-rack1412-blade,bla-rack1413-blade,bla-rack1414-blade,bla-rack1415-blade,bla-rack1416-blade,bla-rack1417-blade,bla-rack1418-blade,bla-rack1419-blade,bla-rack1420-blade,bla-rack1421-blade,bla-rack1422-blade,bla-rack1423-blade,bla-rack1424-blade,bla-rack1425-blade,bla-rack1426-blade,bla-rack1427-blade,bla-rack1428-blade,bla-rack1429-blade,bla-rack1430-blade,bla-rack1431-blade,bla-rack1432-blade,bla-rack1433-blade,bla-rack1434-blade,bla-rack1435-blade,bla-rack1436-blade,bla-rack1437-blade,bla-rack1438-blade,bla-rack1439-blade,bla-rack1440-blade,bla-rack1441-blade,bla-rack1442-blade,bla-rack1443-blade,bla-rack1444-blade,bla-rack1445-blade,bla-rack1446-blade,bla-rack1447-blade,bla-rack1448-blade,bla-rack1449-blade,bla-rack1450-blade,bla-rack1451-blade,bla-rack1452-blade,bla-rack1453-blade,bla-rack1454-blade,bla-rack1455-blade,bla-rack1456-blade,bla-rack1457-blade,bla-rack1458-blade,bla-rack1459-blade,bla-rack1460-blade,bla-rack1461-blade,bla-rack1462-blade,bla-rack1463-blade,bla-rack1464-blade,bla-rack1465-blade,bla-rack1466-blade,bla-rack1467-blade,bla-rack1468-blade,bla-rack1469-blade,bla-rack1470-blade,bla-rack1471-blade,bla-rack1472-blade,bla-rack1473-blade,bla-rack1474-blade,bla-rack1475-blade,bla-rack1476-blade,bla-rack1477-blade,bla-rack1478-blade,bla-rack1479-blade,bla-rack1480-blade,bla-rack1481-blade,bla-rack1482-blade,bla-rack1483-blade,bla-rack1484-blade,bla-rack1485-blade,bla-rack1486-blade,bla-rack1487-blade,bla-rack1488-blade,bla-rack1489-blade,bla-rack1490-blade,bla-rack1491-blade,bla-rack1492-blade,bla-rack1493-blade,bla-rack1494-blade,bla-rack1495-blade,bla-rack1496-blade,bla-rack1497-blade,bla-rack1498-blade,bla-rack1499-blade,bla-rack1500-blade,bla-rack1501-blade,bla-rack1502-blade,bla-rack1503-blade,bla-rack1504-blade,bla-rack1505-blade,bla-rack1506-blade,bla-rack1507-blade,bla-rack1508-blade,bla-rack1509-blade,bla-rack1510-blade,bla-rack1511-blade,bla-rack1512-blade,bla-rack1513-blade,bla-rack1514-blade,bla-rack1515-blade,bla-rack1516-blade,bla-rack1517-blade,bla-rack1518-blade,bla-rack1519-blade,bla-rack1520-blade,bla-rack1521-blade,bla-rack1522-blade,bla-rack1523-blade,bla-rack1524-blade,bla-rack1525-blade,bla-rack1526-blade,bla-rack1527-blade,bla-rack1528-blade,bla-rack1529-blade,bla-rack1530-blade,bla-rack1531-blade,bla-rack1532-blade,bla-rack1533-blade,bla-rack1534-blade,bla-rack1535-blade,bla-rack1536-blade,bla-rack1537-blade,bla-rack1538-blade,bla-rack1539-blade,bla-rack1540-blade,bla-rack1541-blade,bla-rack1542-blade,bla-rack1543-blade,bla-rack1544-blade,bla-rack1545-blade,bla-rack1546-blade,bla-rack1547-blade,bla-rack1548-blade,bla-rack1549-blade,bla-rack1550-blade,bla-rack1551-blade,bla-rack1552-blade,bla-rack1553-blade,bla-rack1554-blade,bla-rack1555-blade,bla-rack1556-blade,bla-rack1557-blade,bla-rack1558-blade,bla-rack1559-blade,bla-rack1560-blade,bla-rack1561-blade,bla-rack1562-blade,bla-rack1563-blade,bla-rack1564-blade,bla-rack1565-blade,bla-rack1566-blade,bla-rack1567-blade
[root@o184i224 ~]# echo "bla1 bla2 bla3" | /opt/cmu/tools/cmu_condense_names -h

cmu_condense_names -h [-c item_name] [-i out_block_separator ] [-r out_range_separator] <argument>

-h: display this help
-c: print also the number of items
-i: separator string between blocks of names
-r: separator string into composite ranges, e.g. [1-12;15;17] ';' is the range separator

compact a string of multiple (separated by spaces,coma or semicolon) names into (if possible) a more compact form

e.g: cn001a,cn005a,cn006a,cn007a,cn333a,mgt1,mgt2,mgt3,mgt4,fileserver
     cn[001,005-007,333]a,mgt[1-4],fileserver

[root@o184i224 ~]# echo "bla1 bla2 bla3" | /opt/cmu/tools/cmu_condense_names -c
/opt/cmu/tools/cmu_condense_names: option requires an argument -- 'c'

cmu_condense_names -h [-c item_name] [-i out_block_separator ] [-r out_range_separator] <argument>

-h: display this help
-c: print also the number of items
-i: separator string between blocks of names
-r: separator string into composite ranges, e.g. [1-12;15;17] ';' is the range separator

compact a string of multiple (separated by spaces,coma or semicolon) names into (if possible) a more compact form

e.g: cn001a,cn005a,cn006a,cn007a,cn333a,mgt1,mgt2,mgt3,mgt4,fileserver
     cn[001,005-007,333]a,mgt[1-4],fileserver

[root@o184i224 ~]# echo "bla1 bla2 bla3" | /opt/cmu/tools/cmu_condense_names -c item
bla[1-3] { 3 items }
[root@o184i224 ~]# echo "bla1,bla2,bla3" | /opt/cmu/tools/cmu_condense_names -c item
bla[1-3] { 3 items }


pbsnodes -a | grep -e "^[[:alnum:]]" -e state | sed -e 's/     state = //g'  | sed '1~2 {N;s/\n/ /g}'
o184i225 free
o184i226 free
o184i227 free
o184i228 free
o184i229 free
o184i230 free
o184i231 free
o184i232 free
o184i233 free
o184i234 free
o184i235 free
o184i236 free
o184i237 free
o184i238 free


Configure CMU Remote Display
 - ssh -X <cmu_cluster>
   - echo $DISPLAY
   [root@o184i224 ~]# echo $DISPLAY
   localhost:10.0
 - From CMU
   - Options > Change X Display
   - IP Address value: localhost
   - Display value: :10
     - NOTE: you need the ':'

SERVER;Workload Scheduler|status; xterm -display CMU_GUI_IP_ADDRESS CMU_GUI_DISPLAY_NUMBER -e watch "/usr/local/bin/sinfo;echo;/usr/local/bin/sinfo -R";
